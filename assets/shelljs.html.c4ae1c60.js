import{_ as e,o as t,c as p,a as n,b as s,d as c,e as o,r as l}from"./app.5c33355f.js";const i={},u=n("h1",{id:"shelljs-\u5728-node-\u4E2D\u4F7F\u7528-shell-\u547D\u4EE4",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#shelljs-\u5728-node-\u4E2D\u4F7F\u7528-shell-\u547D\u4EE4","aria-hidden":"true"},"#"),s(" shelljs \u5728 Node \u4E2D\u4F7F\u7528 Shell \u547D\u4EE4")],-1),r=n("p",null,"ShellJS \u662F\u57FA\u4E8E Node.js API \u7684 shell \u547D\u4EE4\uFF0C\u8DE8\u5E73\u53F0\uFF08Windows/Linux/macOS\uFF09\u5B9E\u73B0\u3002",-1),d=n("p",null,"ShellJS \u8BA9\u6211\u4EEC\u7528\u719F\u6089\u7684 JS \u7684\u8BED\u6CD5\u6765\u6267\u884C shell \u547D\u4EE4\u3002",-1),k={href:"https://www.npmjs.com/package/shelljs",target:"_blank",rel:"noopener noreferrer"},m=o(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u5F15\u5165shelljs</span>
<span class="token keyword">var</span> shell <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;shelljs&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//\u68C0\u67E5\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728 \`git \`\u547D\u4EE4</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>shell<span class="token punctuation">.</span><span class="token function">which</span><span class="token punctuation">(</span><span class="token string">&#39;git&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u5185\u5BB9</span>
  shell<span class="token punctuation">.</span><span class="token function">echo</span><span class="token punctuation">(</span><span class="token string">&#39;Sorry, this script requires git&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  shell<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

shell<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">&#39;-rf&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;out/Release&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5F3A\u5236\u9012\u5F52\u5220\u9664 out/Release\u76EE\u5F55</span>
shell<span class="token punctuation">.</span><span class="token function">cp</span><span class="token punctuation">(</span><span class="token string">&#39;-R&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;stuff/&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;out/Release&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5C06 stuff/ \u4E2D\u6240\u6709\u5185\u5BB9\u62F7\u8D1D\u81F3 out/Release \u76EE\u5F55</span>

shell<span class="token punctuation">.</span><span class="token function">cd</span><span class="token punctuation">(</span><span class="token string">&#39;lib&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8FDB\u5165\`lib\`\u76EE\u5F55</span>
<span class="token comment">//\u627E\u51FA\u6240\u6709\u7684\u6269\u5C55\u540D\u4E3Ajs\u7684\u6587\u4EF6\uFF0C\u5E76\u904D\u5386\u8FDB\u884C\u64CD\u4F5C</span>
shell<span class="token punctuation">.</span><span class="token function">ls</span><span class="token punctuation">(</span><span class="token string">&#39;*.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* \u8FD9\u662F\u7B2C\u4E00\u4E2A\u96BE\u70B9\uFF1Ased\u6D41\u7F16\u8F91\u5668,\u5EFA\u8BAE\u4E13\u9898\u5B66\u4E60\uFF0C-i\u8868\u793A\u76F4\u63A5\u4F5C\u7528\u6E90\u6587\u4EF6 */</span>
  <span class="token comment">//\u5C06build_version\u5B57\u6BB5\u66FF\u6362\u4E3A&#39;v0.1.2&#39;</span>
  shell<span class="token punctuation">.</span><span class="token function">sed</span><span class="token punctuation">(</span><span class="token string">&#39;-i&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;BUILD_VERSION&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;v0.1.2&#39;</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//\u5C06\u5305\u542B\`REMOVE_THIS_LINE\`\u5B57\u7B26\u4E32\u7684\u884C\u5220\u9664</span>
  shell<span class="token punctuation">.</span><span class="token function">sed</span><span class="token punctuation">(</span><span class="token string">&#39;-i&#39;</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.*REMOVE_THIS_LINE.*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//\u5C06\u5305\u542B\`REPLACE_LINE_WITH_MACRO\`\u5B57\u7B26\u4E32\u7684\u884C\u66FF\u6362\u4E3A\`macro.js\`\u4E2D\u7684\u5185\u5BB9</span>
  shell<span class="token punctuation">.</span><span class="token function">sed</span><span class="token punctuation">(</span><span class="token string">&#39;-i&#39;</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*REPLACE_LINE_WITH_MACRO.*\\n</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> shell<span class="token punctuation">.</span><span class="token function">cat</span><span class="token punctuation">(</span><span class="token string">&#39;macro.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//\u8FD4\u56DE\u4E0A\u4E00\u7EA7\u76EE\u5F55</span>
shell<span class="token punctuation">.</span><span class="token function">cd</span><span class="token punctuation">(</span><span class="token string">&#39;..&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//run external tool synchronously</span>
<span class="token comment">//\u5373\u540C\u6B65\u8FD0\u884C\u5916\u90E8\u5DE5\u5177</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>shell<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;git commit -am &quot;Auto-commit&quot;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    shell<span class="token punctuation">.</span><span class="token function">echo</span><span class="token punctuation">(</span><span class="token string">&#39;Error: Git commit failed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    shell<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><h3 id="which-command" tabindex="-1"><a class="header-anchor" href="#which-command" aria-hidden="true">#</a> which(command)</h3><p>\u5728\u73AF\u5883\u53D8\u91CFPATH\u4E2D\u5BFB\u627E\u6307\u5B9A\u547D\u4EE4\u7684\u5730\u5740\uFF0C\u5224\u65AD\u8BE5\u547D\u4EE4\u662F\u5426\u53EF\u6267\u884C\uFF0C\u8FD4\u56DE\u8BE5\u547D\u4EE4\u7684\u7EDD\u5BF9\u5730\u5740</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u68C0\u67E5\u7CFB\u7EDF\u4E2D\u662F\u5426\u5B58\u5728 \`git \`\u547D\u4EE4</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>shell<span class="token punctuation">.</span><span class="token function">which</span><span class="token punctuation">(</span><span class="token string">&#39;git&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u5185\u5BB9</span>
  shell<span class="token punctuation">.</span><span class="token function">echo</span><span class="token punctuation">(</span><span class="token string">&#39;Sorry, this script requires git&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  shell<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="echo-msg" tabindex="-1"><a class="header-anchor" href="#echo-msg" aria-hidden="true">#</a> echo(msg)</h3><p>\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u6307\u5B9A\u5185\u5BB9</p><p><code>echo(&#39;xxx&#39;).to(xxx.txt)</code> \u5199\u5165\u6587\u4EF6</p><h3 id="exit-code" tabindex="-1"><a class="header-anchor" href="#exit-code" aria-hidden="true">#</a> exit(code)</h3><p>\u4EE5\u9000\u51FA\u7801\u4E3Acode\u9000\u51FA\u5F53\u524D\u8FDB\u7A0B</p><h3 id="rm-options-file-file" tabindex="-1"><a class="header-anchor" href="#rm-options-file-file" aria-hidden="true">#</a> rm([options\uFF0C] file [\uFF0Cfile ...])</h3><p>\u5220\u9664\u4E00\u4E2A\u76EE\u5F55\u4E2D\u4E00\u4E2A\u6216\u591A\u4E2A\u6587\u4EF6\u6216\u76EE\u5F55\uFF0C\u4E00\u65E6\u5220\u9664\uFF0C\u65E0\u6CD5\u6062\u590D\u3002</p><p>\u5E38\u7528\u53C2\u6570\uFF1A</p><ul><li><code>-f</code>: \u5F3A\u5236\u5220\u9664\u6587\u4EF6;</li><li><code>-i</code>: \u5220\u9664\u4E4B\u524D\u5148\u8BE2\u95EE\u7528\u6237;</li><li><code>-r</code>: \u9012\u5F52\u5904\u7406\u76EE\u5F55;</li><li><code>-v</code>: \u663E\u793A\u5904\u7406\u8FC7\u7A0B;</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>shell<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">&#39;-rf&#39;</span><span class="token punctuation">,</span> staticSplash<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="cp-options-source-array-dest-cp-r-index-txt-newcopy-cp-r-index-txt-old-txt-newcopy" tabindex="-1"><a class="header-anchor" href="#cp-options-source-array-dest-cp-r-index-txt-newcopy-cp-r-index-txt-old-txt-newcopy" aria-hidden="true">#</a> cp([options,] source_array, dest) cp(&#39;-R&#39;,&#39;index.txt&#39;, &#39;~/newCopy/&#39;) cp(&#39;-R&#39;,[&#39;index.txt&#39;, &#39;old.txt&#39;], &#39;~/newCopy/&#39;)</h3><p>\u7528\u6765\u5C06\u4E00\u4E2A\u6216\u591A\u4E2A\u6E90\u6587\u4EF6\u6216\u76EE\u5F55\u590D\u5236\u5230\u6307\u5B9A\u7684\u6587\u4EF6\u6216\u76EE\u5F55\u3002</p><p>\u5E38\u7528\u53C2\u6570\uFF1A</p><ul><li><code>-f</code>: \u5F3A\u5236\uFF08\u9ED8\u8BA4\u884C\u4E3A)</li><li><code>-L</code>: \u6309\u7167\u7B26\u53F7\u94FE\u63A5</li><li><code>-r,-R</code>: \u9012\u5F52</li><li><code>-n</code>: \u4E0D\u7834\u574F</li><li><code>-u</code>: \u4EC5\u5F53\u6E90\u6BD4\u76EE\u6807\u66F4\u65B0\u65F6\u590D\u5236</li><li><code>-P</code>: \u4E0D\u9075\u5FAA\u7B26\u53F7\u94FE\u63A5</li></ul>`,19);function h(v,b){const a=l("ExternalLinkIcon");return t(),p("div",null,[u,r,d,n("p",null,[n("a",k,[s("\u67E5\u770B\u6587\u6863"),c(a)])]),m])}var f=e(i,[["render",h],["__file","shelljs.html.vue"]]);export{f as default};
